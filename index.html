<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALZHEIMER'S DESEASE</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.5/jspdf.min.js"></script> 
</head>
<body>
    <header id="nav" class="br-10">
        <div class="flex">
            <li>
                <a type="button" data-tab-target="#home" class="homeBtn" href="#home" title="home"><strong>HOME</strong></a>
            </li>
            <li>
                <a type="button" data-tab-target="#about" class="aboutBtn" href="#about" title="about"><strong>ABOUT</strong></a>
            </li>
            <li>
                <a type="button" data-tab-target="#information" class="infoBtn" href="#information" title="information"><strong>INFORMATION</strong></a>
            </li>
        </div>
    </header>

    <div class="tab-content">
        <div class="bg-img">
            <div class="text br-10">
                <h1 class="w-100 text-center">RECOGNITION ALZHEIMER'S DISEASE</h1>
            </div>
        </div>
        <div id="home" class="home" data-tab-content>
            <div class="pd-16">
                <fieldset class="form pd-16 br-10 w-100">
                    <h4>Thông tin của bạn</h4>
                    <div class="flex">
                        <div class="col">
                            <div class="form-group block">
                                <div class="label">
                                    <label for="username"><strong><i class="fa-solid fa-user"></i>Tên: </strong></label>
                                </div>
                                <input class="w-80" type="text" placeholder="Your name here" name="username" id="username" required onkeyup="document.getElementById('get-name').innerText = this.value">
                            </div>
                            <div class="form-group block">
                                <div class="label">
                                    <label for="age"><strong><i class="fa-solid fa-user-gear"></i>Tuổi: </strong></label>
                                </div>
                                <input class="w-80" type="number" placeholder="Your age here" name="age" id="age" onkeyup="document.getElementById('get-age').innerText = this.value">
                            </div>
                            <div class="form-group block">
                                <div class="label">
                                    <label for="gender"><strong><i class="fa-solid fa-mars-and-venus"></i>Giới tính: </strong></label>
                                </div>
                                <div class="flex w-80">
                                    <div class="input">
                                        <input type="radio" name="gender" id="gender1" value="Male"><label class="mt-7 f-17" for="gender1">&nbsp;Nam</label>
                                    </div>
                                    <div class="input">
                                        <input type="radio" name="gender" id="gender2" value="Female"><label class="mt-7 f-17" for="gender2">&nbsp;Nữ</label>
                                    </div>
                                    <div class="input">
                                        <input type="radio" name="gender" id="gender3" value="Other"><label class="mt-7 f-17" for="gender3">&nbsp;Khác</label>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group" style="display: flex;">
                                <div class="label" style="width: 44%">
                                    <label for="date"><strong><i class="fa-solid fa-calendar"></i>Ngày sinh:</strong></label>
                                </div>
                                <div class="input col">
                                    <input type="date" name="date" id="date">
                                </div>
                            </div>
                            <div class="form-group block">
                                <div class="label">
                                    <label for="age"><strong><i class="fa-solid fa-mobile-screen"></i>Số điện thoại: </strong></label>
                                </div>
                                <input class="w-80" type="number" placeholder="Your phone number" name="phone" id="phone" onkeyup="document.getElementById('get-phone').innerText = this.value">
                            </div>
                        </div>
                        <div class="check col">
                            <h3>Tải lên ảnh X-quang tại đây</h3>
                            <div class="upload br-10">
                                <input class="btn" type="file" id="sortpicture" name="sortpic" onchange="chooseFile(this)"
                                   accept="image/gif, image/jpeg, image/jpg, image/png">
                                <div class="flex">
                                    <button class="br-10" id="upload">Tải lên</button>
                                    <button class="br-10" onclick="window.location.reload();">Reset</button>
                                </div>    
            
                            </div>
                        </div>
                    </div>
                </fieldset>
            </div>
        
            <div id="response" class="bill pd-16 text-white br-10">
                <header>
                    <button type="button" id="create_pdf" class="br-10" style="float: right;"><i class="fa-solid fa-print"></i></button>
                    <div style="clear: both;"></div>
                    <h2 class="text-center">Phiếu khám bệnh</h2>
                    <h6 class="text-center">Phát hiện bệnh Alzheimer</h6>
                </header>
                <main>
                    <div class="header">
                        <p><strong>Tên: </strong><span id="get-name"></span></p>
                        <p><strong>Tuổi: </strong><span id="get-age"></span></p>
                        <p><strong>Ngày khám: </strong><span id="get-date"></span></p>
                        <p><strong>Điện thoại: </strong><span id="get-phone"></span></p>
                    </div>
                    <div class="main">
                        <table class="w-100">
                            <thead style="background: grey; color: #fff">
                                <tr>
                                    <th>Ảnh X-quang</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class=" text-center">
                                        <div class="upload-image">
                                            <img src="" alt="" id="image" width="128" height="128" >
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <table class="w-100">
                            <thead style="background: grey; color: #fff">
                                <tr>
                                    <th class="col-table">Lần khám</th>
                                    <th class="col-table">Triệu chứng/chẩn đoán</th>
                                    <th class="col-table">Thuốc điều trị</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="br text-center">
                                        <span id="times">1</span>
                                    </td>
                                    <td class="br text-center">
                                        <div class="text">
                                            <span id="check"></span>
                                        </div>
                                    </td>
                                    <td class="text-center">
                                        <span id="medicine"></span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="advice">
                            <label for=""><strong>Lời dặn</strong></label>
                            <p> - Khuyến khích chế độ ăn uống MIND, ăn nhiều rau xanh, đậu,
                               giảm đường, chất béo và các loại thịt đỏ.</p>
                        </div>
                        <div class="block sign">
                            <div class="row text-center">
                                <span style="font-size: 10px;"><strong>Author</strong></span>
                            </div>
                            <div class="row">
                                <img src="img/sign.jpeg" alt="AuthorSign">
                            </div>
                            <div class="row text-center">
                                <span style="font-size: 10px;">PhamNguyenDuyTien</span>
                            </div>
                        </div>
                        <div style="clear: both;"></div>
                    </div>
                    <div class="footer">
                        <p class="text-center">Cảm ơn đã sử dụng dịch vụ</p>
                    </div>
                </main>
            </div>
            <footer class="flex">
                <div class="col">
                    <span>Nhận biết bệnh Alzheimer 2022</span>
                </div>
                <div class="col right">
                    <i class="fa-brands fa-facebook"></i>
                    <i class="fa-brands fa-youtube"></i>
                    <i class="fa-brands fa-twitter"></i>
                    <i class="fa-brands fa-google"></i>
                </div>
            </footer>
        </div>
    
        <div id="about" class="active" data-tab-content>
            <div class="pd-16 block about" >
                <div class="card">
                    <div class="card-item br-10 col block">
                        <a href="https://github.com/PhamNguyenDuyTien" title="Github">Github</a>
                    </div>
                    <div class="card-item br-10 col block">
                        <a href="#" title="">Papers</a>
                    </div>
                    <div class="card-item br-10 col block">
                        <a href="#" title="">Report</a>
                    </div>
                    <div class="card-item br-10 col block">
                        <a href="#" title="">Poster</a>
                    </div>
                </div>
            </div>
        </div>
    
        <div id="information" class="br-10 pd-16 information" data-tab-content>
            <div class="image">
                <img class="br-10" src="./img/MatTriNho.jpg" alt="MatTriNho">
            </div>
            <div class="flex">
                <div class="col pd-16">
                    <h5>Giới thiệu:</h5>
                    <p>Bệnh Alzheimer’s (AHLZ-high-merz) là một bệnh lý về não 
                        tác động đến trí nhớ, suy nghĩ và hành vi. Bệnh Alzheimer’s 
                        không phải là bệnh lão khoa thông thường hoặc bệnh thần kinh.</p>
                    <h5>Là dạng phổ biến nhất của hội chứng suy giảm trí nhớ</h5>
                    <p>Hội chứng suy giảm trí nhớ là thuật ngữ tổng quát về việc mất 
                        trí nhớ và các khả năng tư duy nghiêm trọng đến nỗi gây trở ngại 
                        cho cuộc sống thường ngày. Bệnh Alzheimer chiếm khoảng 60% đến 80% trong những bệnh làm suy giảm trí nhớ.</p>
                    <div style="clear: both;"></div>
                </div>
                <div class="col pd-16">
                    <h5>Cách phòng bệnh Alzheimer hiệu quả</h5>
                    <ul>
                        <li>Tập thể dục thường xuyên</li>
                        <li>Chế độ ăn uống lành mạnh</li>
                        <li>Ngủ đủ giấc</li>
                        <li>Quản lý căng thẳng</li>
                        <li>Thường xuyên kiểm tra sức khỏe</li>
                    </ul>
                    <!-- <span class="author">Pham Nguyen Duy Tien</span> -->
                </div>
            </div>
        </div>
    </div>



    <!-- Active tabs -->
    <script>
        const tabs = document.querySelectorAll('[data-tab-target]');
        const tabContents = document.querySelectorAll('[data-tab-content]');

        tabs.forEach(tab =>{
            tab.addEventListener('click',()=>{
                const target = document.querySelector(tab.dataset.tabTarget)
                tabContents.forEach(tabContent =>{
                    tabContent.classList.remove('active')
                })
                target.classList.add('active')
            })
        })
    </script>

    <script>
        let y = new Date();
        let m = new Date();
        let d = new Date();

        let year = y.getFullYear();
        let month = m.getMonth() + 1;
        let day = d.getDate();

        $("#get-date").html(day + "/" + month + "/" + year);
    </script>


    <!-- Display images -->
    <script>
        function chooseFile(fileInput){
            if(fileInput.files && fileInput.files[0]){
                var reader = new FileReader();
                reader.onload = function(e){
                    $('#image').attr('src', e.target.result);
                }
                reader.readAsDataURL(fileInput.files[0]);
            }
        }
    </script>
    

    <!-- Display Bill -->
    <script>
        $("#upload").on('click',function(){
            const billModal = document.querySelector(".bill");
            billModal.classList.add('open');

            var file_data = $("#sortpicture").prop("files")[0];
            var form_data = new FormData();
            form_data.append("file", file_data);
    
            $.ajax({
                url: 'http://127.0.0.1:8000/upload',
                cache: false,
                contentType: false,
                processData: false,
                data: form_data,
                type: 'post',
                success: function(api_resp){
                    $("#check").html(api_resp);
                    if((api_resp == "Nhẹ") || api_resp == "Bắt đầu có triệu chứng"){
                        $("#medicine").html('Rivastigmine (Exelon)');
                    }
                    else if(api_resp == "Vừa phải"){
                        $("#medicine").html('Galantamine (Razadyne)');
                    }
                    else if(api_resp == "Nặng"){
                        $("#medicine").html('Memantine (Namenda)');
                    }
                    else if(api_resp == "Không có triệu chứng"){
                        $('#medicine').html("");
                    }
                },
                error: function(err){
                    alert(err.responseText);
                }
            });
        });
    </script>

<script>  
    (function () {  
        var  
            form = $('.bill'),  
            cache_width = form.width(),  
            a4 = [595.28, 841.89]; // for a4 size paper width and height  
  
        $('#create_pdf').on('click', function () {  
            $('body').scrollTop(0);  
            createPDF();  
        });  
        //create pdf  
        function createPDF() {  
            getCanvas().then(function (canvas) {  
                var  
                 img = canvas.toDataURL("image/png"),  
                 doc = new jsPDF({  
                     unit: 'px',  
                     format: 'a4'  
                 });  
                doc.addImage(img, 'JPEG', 20, 20);  
                doc.save('Medical-bill.pdf');  
                form.width(cache_width);  
            });  
        }  
  
        // create canvas object  
        function getCanvas() {  
            form.width((a4[0] * 1.33333) - 80).css('max-width', 'none');  
            return html2canvas(form, {  
                imageTimeout: 2000,  
                removeContainer: true  
            });  
        }  
  
    }());  
</script>  
<script>  
    /* 
 * jQuery helper plugin for examples and tests 
 */  
    (function ($) {  
        $.fn.html2canvas = function (options) {  
            var date = new Date(),  
            $message = null,  
            timeoutTimer = false,  
            timer = date.getTime();  
            html2canvas.logging = options && options.logging;  
            html2canvas.Preload(this[0], $.extend({  
                complete: function (images) {  
                    var queue = html2canvas.Parse(this[0], images, options),  
                    $canvas = $(html2canvas.Renderer(queue, options)),  
                    finishTime = new Date();  
  
                    $canvas.css({ position: 'absolute', left: 0, top: 0 }).appendTo(document.body);  
                    $canvas.siblings().toggle();  
  
                    $(window).click(function () {  
                        if (!$canvas.is(':visible')) {  
                            $canvas.toggle().siblings().toggle();  
                            throwMessage("Canvas Render visible");  
                        } else {  
                            $canvas.siblings().toggle();  
                            $canvas.toggle();  
                            throwMessage("Canvas Render hidden");  
                        }  
                    });  
                    throwMessage('Screenshot created in ' + ((finishTime.getTime() - timer) / 1000) + " seconds<br />", 4000);  
                }  
            }, options));  
  
            function throwMessage(msg, duration) {  
                window.clearTimeout(timeoutTimer);  
                timeoutTimer = window.setTimeout(function () {  
                    $message.fadeOut(function () {  
                        $message.remove();  
                    });  
                }, duration || 2000);  
                if ($message)  
                    $message.remove();  
                $message = $('<div ></div>').html(msg).css({  
                    margin: 0,  
                    padding: 10,  
                    background: "#000",  
                    opacity: 0.7,  
                    position: "fixed",  
                    top: 10,  
                    right: 10,  
                    fontFamily: 'Tahoma',  
                    color: '#fff',  
                    fontSize: 12,  
                    borderRadius: 12,  
                    width: 'auto',  
                    height: 'auto',  
                    textAlign: 'center',  
                    textDecoration: 'none'  
                }).hide().fadeIn().appendTo('body');  
            }  
        };  
    })(jQuery);  
  
</script>  




</body>
</html>




